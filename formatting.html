<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>pg-promise API</title>
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="style.css">
</head>

<body>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-pg-promise.html">pg-promise</a></li></ul><h3>Externals</h3><ul><li><a href="external-Client.html">Client</a></li><li><a href="external-Error.html">Error</a></li><li><a href="external-PG.html">PG</a></li><li><a href="external-pg-minify.html">pg-minify</a></li><li><a href="external-pg-pool.html">pg-pool</a></li><li><a href="external-Promise.html">Promise</a></li><li><a href="external-RangeError.html">RangeError</a></li><li><a href="external-spex.html">spex</a></li><li><a href="external-Stream.html">Stream</a></li><li><a href="external-TypeError.html">TypeError</a></li></ul><h3>Classes</h3><ul><li><a href="Database.html">Database</a></li><li><a href="errors.ParameterizedQueryError.html">ParameterizedQueryError</a></li><li><a href="errors.PreparedStatementError.html">PreparedStatementError</a></li><li><a href="errors.QueryFileError.html">QueryFileError</a></li><li><a href="errors.QueryResultError.html">QueryResultError</a></li><li><a href="helpers.Column.html">Column</a></li><li><a href="helpers.ColumnSet.html">ColumnSet</a></li><li><a href="helpers.TableName.html">TableName</a></li><li><a href="ParameterizedQuery.html">ParameterizedQuery</a></li><li><a href="PreparedStatement.html">PreparedStatement</a></li><li><a href="PromiseAdapter.html">PromiseAdapter</a></li><li><a href="QueryFile.html">QueryFile</a></li><li><a href="txMode.TransactionMode.html">TransactionMode</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:connect">connect</a></li><li><a href="global.html#event:disconnect">disconnect</a></li><li><a href="global.html#event:error">error</a></li><li><a href="global.html#event:extend">extend</a></li><li><a href="global.html#event:query">query</a></li><li><a href="global.html#event:receive">receive</a></li><li><a href="global.html#event:task">task</a></li><li><a href="global.html#event:transact">transact</a></li></ul><h3>Namespaces</h3><ul><li><a href="errors.html">errors</a></li><li><a href="formatting.html">formatting</a></li><li><a href="helpers.html">helpers</a></li><li><a href="txMode.html">txMode</a></li><li><a href="utils.html">utils</a></li></ul><h3>Interfaces</h3><ul><li><a href="Task.html">Task</a></li></ul><h3>Global</h3><ul><li><a href="global.html#queryResult">queryResult</a></li></ul>
    <div class="home-link">
        <a href="https://github.com/vitaly-t/pg-promise">&lt;&lt; GitHub</a>
    </div>
</nav>

<div id="main">
    




<section>

<header>
    
        <h2>formatting</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>Namespace for all query-formatting functions, available from <code>pgp.as</code>, before and after initializing the library.</p></div>
        

        


    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>alias</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.alias">alias</a> - formats an SQL alias.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.name">name</a> - formats an SQL Name/Identifier.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.text">text</a> - formats a text string.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>number</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.number">number</a> - formats a number.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>buffer</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.buffer">buffer</a> - formats a <code>Buffer</code> object.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.value">value</a> - formats text as an open value.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>json</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.json">json</a> - formats any value as JSON.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>func</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.func">func</a> - formats the value returned from a function.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>format</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="formatting.html#.format">format</a> - formats a query according to parameters.</p></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line270">line 270</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".alias"><span class="type-signature">(static) </span>alias<span class="signature">(name)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p><strong> Added in v5.9.0 </strong></p>
<p>Simpler (non-verbose) version of method <a href="formatting.html#.name">name</a>, to handle only a regular string-identifier
that's used as an SQL alias, i.e. it doesn't support <code>*</code> or an array/object of names, which in the context of
an SQL alias would be incorrect.</p>
<p>When formatting a query, a variable makes use of this method via modifier <code>:alias</code>. See method <a href="formatting.html#.format">format</a>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>SQL alias name, or a function that returns it.</p>
<p>The name must be at least 1 character long.</p>
<p>If <code>name</code> doesn't resolve into a non-empty string, it throws <a href="external-TypeError.html">TypeError</a> = <code>Invalid sql alias: ...</code></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line405">line 405</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="formatting.html#.name">name</a>,<a href="formatting.html#.format">format</a></li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The SQL alias, properly escaped for compliance with the PostgreSQL standard for <a href="https://github.com/vitaly-t/pg-promise#sql-names">SQL Names</a> and identifiers.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".array"><span class="type-signature">(static) </span>array<span class="signature">(arr)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Converts an array of values into its PostgreSQL presentation as an Array-Type constructor string: <code>array[]</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>arr</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Array to be converted, or a function that returns one.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line573">line 573</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".bool"><span class="type-signature">(static) </span>bool<span class="signature">(value)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Converts a truthy value into PostgreSQL boolean presentation.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>
|

<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Value to be converted, or a function that returns the value.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line493">line 493</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".buffer"><span class="type-signature">(static) </span>buffer<span class="signature">(obj, raw<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Converts an object of type <code>Buffer</code> into a hex string compatible with PostgreSQL type <code>bytea</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>obj</code></td>
            

            <td class="type">
            
                
<span class="param-type">Buffer</span>
|

<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Object to be converted, or a function that returns one.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>raw</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>Indicates when not to wrap the resulting string in quotes.</p>
<p>The generated hex string doesn't need to be escaped.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line465">line 465</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".csv"><span class="type-signature">(static) </span>csv<span class="signature">(values)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Converts a single value or an array of values into a CSV string, with all values formatted according to their type.</p>
<p>When formatting a query, a variable makes use of this method via modifier <code>:csv</code>. See method <a href="formatting.html#.format">format</a>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>values</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">value</span>
|

<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Value(s) to be converted, or a function that returns it.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line594">line 594</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="formatting.html#.format">format</a></li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".date"><span class="type-signature">(static) </span>date<span class="signature">(d, raw<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Converts a <code>Date</code>-type value into PostgreSQL date/time presentation,
wrapped in quotes (unless flag <code>raw</code> is set).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>d</code></td>
            

            <td class="type">
            
                
<span class="param-type">Date</span>
|

<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Date object to be converted, or a function that returns one.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>raw</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>Indicates when not to escape the value.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line511">line 511</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".format"><span class="type-signature">(static) </span>format<span class="signature">(query, values<span class="signature-attributes">opt</span>, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Replaces variables in a string according to the type of <code>values</code>:</p>
<ul>
<li>Replaces <code>$1</code> occurrences when <code>values</code> is of type <code>string</code>, <code>boolean</code>, <code>number</code>, <code>Date</code>, <code>Buffer</code> or when it is <code>null</code>.</li>
<li>Replaces variables <code>$1</code>, <code>$2</code>, ...<code>$100000</code> when <code>values</code> is an array of parameters. It throws a <a href="external-RangeError.html">RangeError</a>
when the values or variables are out of range.</li>
<li>Replaces <code>$*propName*</code>, where <code>*</code> is any of <code>{}</code>, <code>()</code>, <code>[]</code>, <code>&lt;&gt;</code>, <code>//</code>, when <code>values</code> is an object that's not a
<code>Date</code>, <code>Buffer</code>, <a href="QueryFile.html">QueryFile</a> or <code>null</code>. Special property name <code>this</code> refers to the formatting object itself,
to be injected as a JSON string. When referencing a property that doesn't exist in the formatting object, it throws
<a href="external-Error.html">Error</a> = <code>Property 'PropName' doesn't exist</code>, unless option <code>partial</code> is used.</li>
</ul>
<p>By default, each variable is automatically formatted according to its type, unless it is a special variable:</p>
<ul>
<li>Raw-text variables end with <code>:raw</code> or symbol <code>^</code>, and prevent escaping the text. Such variables are not
allowed to be <code>null</code> or <code>undefined</code>, or the method will throw <a href="external-TypeError.html">TypeError</a> = <code>Values null/undefined cannot be used as raw text.</code><ul>
<li><code>$1:raw</code>, <code>$2:raw</code>,..., and <code>$*propName:raw*</code> (see <code>*</code> above)</li>
<li><code>$1^</code>, <code>$2^</code>,..., and <code>$*propName^*</code> (see <code>*</code> above)</li>
</ul>
</li>
<li>Open-value variables end with <code>:value</code> or symbol <code>#</code>, to be escaped, but not wrapped in quotes. Such variables are
not allowed to be <code>null</code> or <code>undefined</code>, or the method will throw <a href="external-TypeError.html">TypeError</a> = <code>Open values cannot be null or undefined.</code><ul>
<li><code>$1:value</code>, <code>$2:value</code>,..., and <code>$*propName:value*</code> (see <code>*</code> above)</li>
<li><code>$1#</code>, <code>$2#</code>,..., and <code>$*propName#*</code> (see <code>*</code> above)</li>
</ul>
</li>
<li>SQL name variables end with <code>:name</code> or symbol <code>~</code> (tilde), and provide proper escaping for SQL names/identifiers:<ul>
<li><code>$1:name</code>, <code>$2:name</code>,..., and <code>$*propName:name*</code> (see <code>*</code> above)</li>
<li><code>$1~</code>, <code>$2~</code>,..., and <code>$*propName~*</code> (see <code>*</code> above)</li>
</ul>
</li>
<li><strong>Version 5.9.0</strong> added support for modifier <code>:alias</code> - non-verbose <a href="https://github.com/vitaly-t/pg-promise#sql-names">SQL Names</a> escaping.</li>
<li>JSON override ends with <code>:json</code> to format the value of any type as a JSON string</li>
<li>CSV override ends with <code>:csv</code> to format an array as a properly escaped comma-separated list of values.</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>query</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type"><a href="QueryFile.html">QueryFile</a></span>
|

<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>A query string, a <a href="QueryFile.html">QueryFile</a> or any object that implements <a href="https://github.com/vitaly-t/pg-promise#custom-type-formatting">Custom Type Formatting</a>, to be formatted according to <code>values</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>values</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>
|

<span class="param-type">object</span>
|

<span class="param-type">value</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Formatting parameter(s) / variable value(s).</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>Formatting Options.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>partial</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>Indicates that we intend to do only a partial replacement, i.e. throw no error when encountering a variable or
property name that's missing within the formatting parameters.</p>
<p>This option has no meaning when option <code>default</code> is present.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>default</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Sets a default value for every variable that's missing, consequently preventing errors when encountering a variable
or property name that's missing within the formatting parameters.</p>
<p>It can also be set to a function, to be called with two parameters that depend on the type of formatting being used,
and to return the actual default value:</p>
<ul>
<li><p>Named Parameters formatting:</p>
<ul>
<li><code>name</code> - name of the property missing in the formatting object</li>
<li><code>obj</code> - the formatting object, and is the same as <code>this</code> context</li>
</ul>
</li>
<li><p>Regular variable formatting:</p>
<ul>
<li><code>index</code> - element's index that's outside of the formatting array's range</li>
<li><code>arr</code> - the formatting array, and is the same as <code>this</code> context</li>
</ul>
</li>
</ul></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line667">line 667</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Formatted query string.</p>
<p>The function will throw an error, if any occurs during formatting.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".func"><span class="type-signature">(static) </span>func<span class="signature">(func, raw<span class="signature-attributes">opt</span>, cc<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Calls the function to get the actual value, and then formats the result
according to its type + <code>raw</code> flag.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>func</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Function to be called, with support for nesting.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>raw</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>Indicates when not to escape the result.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>cc</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Calling Context: <code>this</code> + the only value to be passed into the function on all nested levels.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line638">line 638</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".json"><span class="type-signature">(static) </span>json<span class="signature">(data, raw<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Converts any value into JSON (using <code>JSON.stringify</code>), and returns it as a valid string, with single-quote
symbols fixed, unless flag <code>raw</code> is set.</p>
<p>When formatting a query, a variable makes use of this method via modifier <code>:json</code>. See method <a href="formatting.html#.format">format</a>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Object/value to be converted, or a function that returns it.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>raw</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>Indicates when not to escape the result.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line610">line 610</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="formatting.html#.format">format</a></li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".name"><span class="type-signature">(static) </span>name<span class="signature">(name)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Properly escapes an sql name or identifier, fixing double-quote symbols and wrapping the result in double quotes.</p>
<p>Implements a safe way to format <a href="https://github.com/vitaly-t/pg-promise#sql-names">SQL Names</a> that neutralizes SQL Injection.</p>
<p>When formatting a query, a variable makes use of this method via modifier <code>:name</code> or <code>~</code>. See method <a href="formatting.html#.format">format</a>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">function</span>
|

<span class="param-type">array</span>
|

<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>SQL name or identifier, or a function that returns it.</p>
<p>The name must be at least 1 character long.</p>
<p>If <code>name</code> doesn't resolve into a non-empty string, it throws <a href="external-TypeError.html">TypeError</a> = <code>Invalid sql name: ...</code></p>
<p>If the <code>name</code> contains only a single <code>*</code> (trailing spaces are ignored), then <code>name</code> is returned exactly as is (unescaped).</p>
<ul>
<li>If <code>name</code> is an Array, it is formatted as a comma-separated list of <a href="https://github.com/vitaly-t/pg-promise#sql-names">SQL Names</a></li>
<li>If <code>name</code> is a non-Array object, its keys are formatted as a comma-separated list of <a href="https://github.com/vitaly-t/pg-promise#sql-names">SQL Names</a></li>
</ul>
<p>Passing in an empty array/object will throw <a href="external-Error.html">Error</a> = <code>Cannot retrieve sql names from an empty array/object.</code></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line343">line 343</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="formatting.html#.alias">alias</a>,<a href="formatting.html#.format">format</a></li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The SQL Name/Identifier, properly escaped for compliance with the PostgreSQL standard for <a href="https://github.com/vitaly-t/pg-promise#sql-names">SQL Names</a> and identifiers.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// automatically list object properties as sql names:format('INSERT INTO table(${this~}) VALUES(${one}, ${two})', {    one: 1,    two: 2});//=> INSERT INTO table("one","two") VALUES(1, 2)</code></pre>



        
            

    

    <h4 class="name" id=".number"><span class="type-signature">(static) </span>number<span class="signature">(num)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Converts a numeric value into its PostgreSQL number presentation,
with support for <code>NaN</code>, <code>+Infinity</code> and <code>-Infinity</code>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>num</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Number to be converted, or a function that returns one.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line538">line 538</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".text"><span class="type-signature">(static) </span>text<span class="signature">(value, raw<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Converts a value into PostgreSQL text presentation, escaped as required.</p>
<p>Escaping the result means:</p>
<ol>
<li>Every single-quote (apostrophe) is replaced with two</li>
<li>The resulting text is wrapped in apostrophes</li>
</ol>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">value</span>
|

<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Value to be converted, or a function that returns the value.</p>
<p>If the <code>value</code> resolves as <code>null</code> or <code>undefined</code>, while <code>raw</code>=<code>true</code>,
it will throw <a href="external-TypeError.html">TypeError</a> = <code>Values null/undefined cannot be used as raw text.</code></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>raw</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last"><p>Indicates when not to escape the resulting text.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line305">line 305</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li><code>null</code> string, if the <code>value</code> resolves as <code>null</code> or <code>undefined</code></li>
<li>escaped result of <code>value.toString()</code>, if the <code>value</code> isn't a string</li>
<li><p>escaped string version, if <code>value</code> is a string.</p>
<p>The result is not escaped, if <code>raw</code> was passed in as <code>true</code>.</p>
</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".value"><span class="type-signature">(static) </span>value<span class="signature">(value)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    <p>Represents an open value, one to be formatted according to its type, properly escaped, but without surrounding quotes for text types.</p>
<p>When formatting a query, a variable makes use of this method via modifier <code>:value</code> or <code>#</code>. See method <a href="formatting.html#.format">format</a>.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">value</span>
|

<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Value to be converted, or a function that returns the value.</p>
<p>If <code>value</code> resolves as <code>null</code> or <code>undefined</code>, it will throw <a href="external-TypeError.html">TypeError</a> = <code>Open values cannot be null or undefined.</code></p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="formatting.js.html">formatting.js</a>, <a href="formatting.js.html#line439">line 439</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="formatting.html#.format">format</a></li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Formatted and properly escaped string, but without surrounding quotes for text types.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"></script>
</body>
</html>